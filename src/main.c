/******************************************************************************/
/* change title on for new project                                            */
/******************************************************************************/

/******************************************************************************/
/*   I N C L U D E S                                                          */
/******************************************************************************/

// ---------------------------------------------------------
// system
// ---------------------------------------------------------

// ---------------------------------------------------------
// own 
// ---------------------------------------------------------
#include "main.h"

/******************************************************************************/
/*   D E F I N E S                                                            */
/******************************************************************************/

/******************************************************************************/
/*   M A C R O S                                                              */
/******************************************************************************/

/******************************************************************************/
/*   P R O T O T Y P E S                                                      */
/******************************************************************************/

/******************************************************************************/
/*                                                                            */
/*                                  M A I N                                   */
/*                                                                            */
/******************************************************************************/
#ifndef __TDD__

int main(int argc, const char* argv[] )
{
  MQTMC2 trigData ;

  int sysRc = 0 ;

  /************************************************************************/  
  /*  this program can be called by command line or by trigger monitor    */
  /*  first find out how program has been called and set attributes       */
  /************************************************************************/  
  // -------------------------------------------------------
  // handle command line call
  // -------------------------------------------------------
  if( strlen(argv[1]) != sizeof(MQTMC2) )   
  {                                        
    sysRc = handleCmdLn( argc, argv ) ;   
    if( sysRc != 0 ) goto _door ;        
  }                 
  // -------------------------------------------------------
  // handle trigger monitor call
  // -------------------------------------------------------
  else            
  {              
    memcpy( &trigData, argv[1], sizeof(MQTMC2) ) ;  
    logTrigData( trigData ) ;
    memcpy( qmgrName   , trigData.QMgrName, MQ_Q_MGR_NAME_LENGTH      );
    memcpy( qName      , trigData.QName   , MQ_Q_NAME_LENGTH          );
    memcpy( iniFileName, trigData.UserData, sizeof(trigData.UserData) );
  }           

_door :

  return sysRc ;
}

#endif

/******************************************************************************/
/*                                                                            */
/*   F U N C T I O N S                                                        */
/*                                                                            */
/******************************************************************************/

